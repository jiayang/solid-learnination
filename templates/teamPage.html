<!-- template for individual team page -->

{% extends "base.html" %}

{% block title %}
Always Be a Good Sport
{% endblock %}

{% block content %}

    {{team}} <br>

    <!-- List of all the team's games -->
    {% for game in games %}
    {% if league == 'nba' %}
    <a href="../game/{{game['id']}}">{{game['homeTeam']['City'] + ' ' + game['homeTeam']['Name'] + ' vs. ' + game['awayTeam']['City'] + ' ' + game['awayTeam']['Name']}}</a>
    {% else %}
    {% set game_id = game['date'].split('-') %}
    <a href="../game/{{game_id|join('') + '-' + game['awayTeam']['Abbreviation'] + '-' + game['homeTeam']['Abbreviation']}}">{{game['homeTeam']['City'] + ' ' + game['homeTeam']['Name'] + ' vs. ' + game['awayTeam']['City'] + ' ' + game['awayTeam']['Name']}}</a>
    {% endif %}
    <br>
    {% endfor %}
    <brrrrr>
    <!-- lists of players and their images -->
    {% for player in players %}
        {{player['player']['FirstName'] + player['player']['LastName']}}
        {% if not 'externalMapping' in player['player'] %}
            <br>
        {% elif league == 'nba' %}
            <img src="https://ak-static.cms.nba.com/wp-content/uploads/headshots/nba/latest/260x190/{{player['player']['externalMapping']['ID']}}.png">
        {% elif league == 'nfl' %}
            <br> {# TODO Retrieving NFL player's headshots is messy and complicated, because for some reason the photo ID does not match the player ID #}
        {% elif league == 'nhl' %}
            <img src="https://nhl.bamcontent.com/images/headshots/current/168x168/{{player['player']['externalMapping']['ID']}}.jpg">
        {% else %}
            <img src="https://securea.mlb.com/mlb/images/players/head_shot/{{player['player']['externalMapping']['ID']}}.jpg">
        {% endif %}
    <br>
    {% endfor %}


{% endblock %}
